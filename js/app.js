(function(){var t=function(t){return document.querySelector(t)};var e=t("#text");var i=t("#issue-list");var s=t("#issue-count");var n=t("#url-prefix");var r=function(t){this.issues=[];this.issueCount=0;this.urlPrefix=t||"";this.setOptions();this.updateFieldOptions();e.addEventListener("keyup",this.startJIRAThing.bind(this));e.addEventListener("keydown",this.startJIRAThing.bind(this));n.addEventListener("keyup",this.updateOptions.bind(this))};r.prototype={startJIRAThing:function(t){this.issues=a(e.value);this.updateIssueData();if(this.issues.length<1){return}if(t&&((t.ctrlKey||t.metaKey)&&t.keyCode==13)){t.preventDefault();this.openThemAll()}},openThemAll:function(){if(!this.urlPrefix){return}var t=this.issues;for(var e=0;e<t.length;e++){var i=t[e];window.open(this.urlPrefix+i)}},updateIssueData:function(){this.updateIssueCount();this.updateIssueList()},updateIssueCount:function(t){s.innerHTML=this.issues.length},updateIssueList:function(){var t=this.issues;i.innerHTML="";for(var e=0;e<t.length;e++){var s=document.createElement("li");if(this.urlPrefix){var n=document.createElement("a");n.href=this.urlPrefix+t[e];n.target="blank";n.appendChild(document.createTextNode(t[e]));s.appendChild(n)}else{s.appendChild(document.createTextNode(t[e]))}i.appendChild(s)}},updateOptions:function(){var t=n.value;localStorage.urlPrefix=t;this.setOptions();this.startJIRAThing()},setOptions:function(){this.urlPrefix=localStorage.urlPrefix||null},updateFieldOptions:function(){n.value=this.urlPrefix}};function u(t){return t.split("").reverse().join("")}function a(t){var e=/\d+-[A-Z]+(?!-?[a-zA-Z]{1,10})/g;var i=u(t).match(e);var s=[];if(!i||i.length<1){return s}for(var n=0;n<i.length;n++){s[n]=u(i[n])}return s.reverse()}var o=new r;o.startJIRAThing()})();