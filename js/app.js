(function(){var e=function(e){return document.querySelector(e)};var t=e("#text");var i=e("#issue-list");var n=e("#issue-count");var r=e("#url-prefix");var s=e("#filter-unique");var u=function(e){this.issues=[];this.issueCount=0;this.urlPrefix="";this.filterUnique=true;this.setOptions();t.addEventListener("keyup",this.startJIRAThing.bind(this));t.addEventListener("keydown",this.startJIRAThing.bind(this));r.addEventListener("keyup",this.updateOptions.bind(this));s.addEventListener("change",this.updateOptions.bind(this))};u.prototype={startJIRAThing:function(e){this.issues=l(t.value);if(this.filterUnique){this.issues=this.issues.filter(function(e,t,i){return i.indexOf(e)===t})}this.updateIssueData();if(this.issues.length<1){return}if(e&&((e.ctrlKey||e.metaKey)&&e.keyCode==13)){e.preventDefault();this.openThemAll()}},openThemAll:function(){if(!this.urlPrefix){return}var e=this.issues;for(var t=0;t<e.length;t++){var i=e[t];window.open(this.urlPrefix+i)}},updateIssueData:function(){this.updateIssueCount();this.updateIssueList()},updateIssueCount:function(e){n.innerHTML=this.issues.length},updateIssueList:function(){var e=this.issues;i.innerHTML="";for(var t=0;t<e.length;t++){var n=document.createElement("li");if(this.urlPrefix){var r=document.createElement("a");r.href=this.urlPrefix+e[t];r.target="blank";r.appendChild(document.createTextNode(e[t]));n.appendChild(r)}else{n.appendChild(document.createTextNode(e[t]))}i.appendChild(n)}},updateOptions:function(){var e=r.value;localStorage.urlPrefix=e;this.urlPrefix=e;h("urlPrefix",e);var t=s.checked;localStorage.filterUnique=t;this.filterUnique=t;h("filterUnique",t);this.startJIRAThing()},setOptions:function(){var e=o("urlPrefix")||localStorage.urlPrefix||"";this.urlPrefix=e;r.value=e;h("urlPrefix",e);var t=o("filterUnique")==null?localStorage.filterUnique:o("filterUnique");t=!(t==="false");this.filterUnique=t;s.checked=t;h("filterUnique",t)}};function a(e){return e.split("").reverse().join("")}function l(e){var t=/\d+-[A-Z]+(?!-?[a-zA-Z]{1,10})/g;var i=a(e).match(t);var n=[];if(!i||i.length<1){return n}for(var r=0;r<i.length;r++){n[r]=a(i[r])}return n.reverse()}function o(e,t){if(!t)t=window.location.href;e=e.replace(/[\[\]]/g,"\\$&");var i=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),n=i.exec(t);if(!n)return null;if(!n[2])return"";return decodeURIComponent(n[2].replace(/\+/g," "))}function h(e,t){var i=[location.protocol,"//",location.host,location.pathname].join(""),n=document.location.search,r=e+"="+t,s="?"+r;if(n){keyRegex=new RegExp("([?&])"+e+"[^&]*");if(n.match(keyRegex)!==null){s=n.replace(keyRegex,"$1"+r)}else{s=n+"&"+r}}window.history.replaceState({},"",i+s)}var f=new u})();